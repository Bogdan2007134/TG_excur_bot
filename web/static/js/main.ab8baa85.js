(()=>{"use strict";var e={2980:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var o=r(2608),n=r(9976),i=r(4188),a=r(3856),c=r(207),s=r(8264);const l=r(7016).default.create({InfoProduct:{Button:{justifyContent:"center",position:"fixed",width:"74%",bottom:"4%",left:"13%",height:"9%",borderRadius:10,backgroundColor:"white",borderWidth:1,borderColor:"black"},TextProduct:{fontSize:25,marginHorizontal:"5%",marginVertical:"2%"},ImageProduct:{borderRadius:10,borderWidth:1,borderColor:"black",height:200,width:"90%",marginTop:"5%",marginHorizontal:"5%"}},Main:{Button:{justifyContent:"center",position:"fixed",width:"74%",bottom:"4%",left:"13%",height:"9%",borderRadius:10,backgroundColor:"white",borderWidth:1,borderColor:"black"},Frame:{backgroundColor:"#e8e8e8",borderWidth:1,borderRadius:10,height:290,width:"94%",marginTop:"5%",marginHorizontal:"3%"},Photo:{borderRadius:10,borderWidth:1,borderColor:"black",height:200,width:360,marginHorizontal:"3%",marginTop:"3%"},Text:{flexDirection:"column",justifyContent:"center",alignItems:"center"},NameText:{fontFamily:"Italian",fontSize:25,marginVertical:3,fontWeight:"bold"},PriceText:{fontFamily:"Italian",fontSize:20}}});var d=r(4728);const u=({object:e})=>(0,d.jsxs)(i.default,{style:l.Main.Frame,children:[(0,d.jsx)(s.default,{style:l.Main.Photo,source:{uri:`${e.photo}`}}),(0,d.jsxs)(a.default,{style:l.Main.Text,children:[(0,d.jsx)(c.default,{style:[l.Main.NameText],children:`${e.name}`}),(0,d.jsx)(c.default,{style:l.Main.PriceText,children:`${e.price}`})]})]});var f=r(9024);const h = "https://074a-94-233-250-199.ngrok-free.app"; function b({navigation:e}){const[t,r]=(0,o.useState)([]);const a=async()=>{let e="";if(!window.Telegram?.WebApp)return"User ID: Ne rabotaet blyat'";{const t=window.Telegram.WebApp;e=t.initDataUnsafe?.user}return e?`User ID: ${e.id}`:void 0};return(0,o.useEffect)((()=>{(async()=>{await async function(){try{fetch(`${h}/excursion/`,{mode:"cors",method:"GET",headers:{"ngrok-skip-browser-warning":"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1"}}).then((e=>e.json())).then((e=>r(e.excursions))).catch((e=>console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",e)))}catch(e){console.error("Error fetching excursions: ",e)}}(),console.log(t),await(async()=>{try{await f.default.setItem("UserId",await a())}catch(e){}})()})()}),[]),t&&0!==t.length?(0,d.jsx)(i.default,{children:t.map((t=>(0,d.jsx)(n.default,{onPress:()=>e.navigate("ProductPage",t),children:(0,d.jsx)(u,{object:t})},t.id)))}):null}var p=r(7588),g=r(4636),x=r(4968);const m=({excursion:e})=>(console.log(e),(0,d.jsx)(n.default,{style:l.InfoProduct.Button,onPress:()=>{!function(e){console.log(e.id);const t=async()=>{try{const e=await f.default.getItem("UserId");if(null!==e)return e}catch(e){}};(async r=>{fetch(`${h}/excursion/successful_payment`,{mode:"cors",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:await t(),excur_id:e.excur_id})}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=e.headers.get("content-type");if(t&&t.includes("application/json"))return e.json();throw new Error("Response is not JSON")})).then((e=>x.default.openURL(e.url_bot).catch((e=>console.error("An error occurred",e))))).catch((e=>console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",e)))})(t())}(e)},children:(0,d.jsx)(c.default,{style:{textAlign:"center",color:"black",fontSize:20},children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u043f\u043b\u0430\u0442\u0435"})})),y=({Name:e,Desc:t,Price:r})=>(0,d.jsxs)(i.default,{children:[(0,d.jsx)(c.default,{style:l.InfoProduct.TextProduct,children:`${r}\u20bd`}),(0,d.jsx)(c.default,{style:l.InfoProduct.TextProduct,children:e}),(0,d.jsx)(c.default,{style:l.InfoProduct.TextProduct,children:t})]}),j=({photo:e})=>(0,d.jsx)(s.default,{style:l.InfoProduct.ImageProduct,source:{uri:e}});function w({navigation:e,route:t}){const[r,n]=(0,o.useState)({});return(0,o.useEffect)((()=>{!async function(){n(t.params)}()}),[]),(0,d.jsxs)(i.default,{children:[(0,d.jsx)(j,{photo:r.photo}),(0,d.jsx)(y,{Name:r.name,Price:r.price,Desc:r.desc}),(0,d.jsx)(m,{excursion:r})]})}const P=(0,p.default)();function v(){return(0,d.jsx)(g.default,{children:(0,d.jsxs)(P.Navigator,{children:[(0,d.jsx)(P.Screen,{name:"Main",component:b,options:{title:"\u042d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u0438",headerTitleStyle:{fontWeight:"bold"}}}),(0,d.jsx)(P.Screen,{name:"ProductPage",component:w,options:{title:"\u042d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u0438",headerTintColor:"black",headerTitleStyle:{fontWeight:"bold"}}})]})})}function T(){return(0,d.jsx)(v,{})}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,r),i.exports}r.m=e,(()=>{var e=[];r.O=(t,o,n,i)=>{if(!o){var a=1/0;for(d=0;d<e.length;d++){for(var[o,n,i]=e[d],c=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,n,i]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={590:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,i,[a,c,s]=o,l=0;if(a.some((t=>0!==e[t]))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(s)var d=s(r)}for(t&&t(o);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=r.O(void 0,[132],(()=>r(5888)));o=r.O(o)})();
//# sourceMappingURL=main.ab8baa85.js.map